2026-02-01: Система аутентификации JWT и улучшение API
  - Backend: Реализована JWT аутентификация (Access & Refresh tokens)
  - Backend: Добавлена зависимость python-jose и passlib
  - Backend: Защищены все эндпоинты (session, characters, combat, dice, templates, persistence) через Bearer токены
  - Backend: Добавлен эндпоинт /api/session/auth/refresh для обновления токенов
  - Frontend: Реализованы Axios interceptors для автоматической вставки токенов и обновления при 401 ошибке
  - Frontend: Обновлены Pinia сторы (session, characters, combat, dice) для работы с новой схемой авторизации
  - Frontend: Убрана ручная передача токенов в методы API клиентов
  - Документация: Создан файл docs/auth.md с описанием работы JWT системы
  - Bugfix: Исправлены синтаксические ошибки и дублирование событий WebSocket в API эндпоинтах
  - Bugfix: Исправлена ошибка "missing token" при создании персонажа из шаблона
  - Bugfix: Исправлен роутинг SPA на сервере для корректной работы путей при деплое на VPS

2026-02-01: Подготовка к деплою (Docker)
  - Создан Dockerfile для мульти-этапной сборки (frontend + backend)
  - Создан docker-compose.yml для запуска на VPS
  - Добавлена раздача статики фронтенда через FastAPI в app/main.py
  - Настроен .dockerignore

2026-02-01: Код проекта залит в репозиторий GitHub
  - Настроен удаленный репозиторий origin: https://github.com/qqForest/DnD-Lite.git
  - Основная ветка main отправлена на сервер

2026-02-01: Улучшения UI системы боя и инициативы
  - Frontend: CombatTab - вкладка "Бой" в левом сайдбаре GM
  - Frontend: InitiativeBar - горизонтальная полоса инициативы сверху
  - Frontend: InitiativeBar показывает карточки персонажей слева направо
  - Frontend: Кнопка "Начать бой" перенесена в CombatTab
  - Frontend: Список инициативы теперь в вертикальном виде в CombatTab
  - Frontend: GMLayout обновлён с новой grid-областью для initiative-bar
  - UX: Плавные анимации для карточек инициативы

2026-02-01: Реализована система боя с инициативой
  - Backend: модель InitiativeRoll для хранения бросков инициативы
  - Backend: API endpoints POST/GET /api/combat/initiative
  - Backend: упрощён POST /api/combat/start (character_ids опционален)
  - Backend: GET /api/combat теперь включает initiative_list
  - Backend: WebSocket событие initiative_rolled отправляется только GM
  - Frontend: Pinia store combat.ts для управления состоянием боя
  - Frontend: InitiativeRollModal - модальное окно для броска игрока
  - Frontend: InitiativeList - список инициативы для GM с медалями
  - Frontend: интеграция в PlayerView и GMView
  - GM видит кнопку "Начать бой" → игроки получают модалку → GM видит результаты
  - Приватные броски (только игрок и GM видят результат)

2026-02-01: Документация системы боя и инициативы
  - Создан docs/combat-initiative.md с полной спецификацией
  - Описана механика: GM запускает бой → игроки бросают d20 → сортировка по инициативе
  - Приватные броски инициативы (видны только игроку и GM)
  - Автоматическое модальное окно для игроков при начале боя
  - GM видит список всех бросков отсортированный по убыванию
  - Архитектура: новые модели CombatState, InitiativeRoll
  - API endpoints и WebSocket события
  - Порядок реализации из 10 шагов

2026-02-01: Исправления системы бросков кубиков
  - Backend: добавлено поле formula в DiceResult схему
  - Backend: добавлено поле timestamp в DiceResult (автоматическое заполнение)
  - Backend: formula корректно формируется из dice notation
  - Frontend: убрано дублирование показа RollResult (теперь только через WebSocket)
  - RollResult автоматически показывается всем подключенным клиентам
  - Все игроки и GM видят кто бросил кубик (player_name в результате)
  - Исправлен сайдбар игрока (добавлен cursor: pointer)

2026-02-01: Переработан интерфейс игрока (PlayerView)
  - Карта теперь занимает всё пространство между топ и боттом барами (без padding)
  - Добавлен выдвижной сайдбар (PlayerSidebar) с информацией о сессии
  - Кнопка меню слева сверху в PlayerTopBar для открытия сайдбара
  - "Информация о сессии" перенесена в сайдбар
  - Переделана система бросков - одна кнопка "Бросок" открывает модалку (как у GM)
  - PlayerDiceSelector теперь компактный (кнопка + последний результат)
  - Добавлена поддержка RollResult модального окна для игрока
  - Плавная анимация выдвижения сайдбара (slide from left)
  - Клик по последнему броску открывает детали

2026-02-01: Улучшения UX системы бросков кубиков
  - RollResult автоматически закрывается через 1.5 секунды
  - Добавлена плавная анимация закрытия окна результата (fade-out + scale)
  - Исправлено дублирование бросков в истории (был баг с WebSocket)
  - Теперь показывается только последний бросок в нижней панели (вместо 3)
  - Убран таймер при ручном закрытии результата
  - Двухфазное закрытие: анимация → скрытие компонента

2026-02-01: Переработана система бросков кубиков для компактности
  - DiceRollModal - модальное окно для выбора кубика и броска
  - Одна кнопка "Бросок" в BottomBar вместо всех кубиков
  - Модалка с красивой сеткой кубиков (d4-d100)
  - Поле модификатора и кастомной формулы в модалке
  - История последних 3 бросков справа, кликабельна для просмотра деталей
  - Компактный и удобный интерфейс

2026-02-01: Реализован основной GM интерфейс после начала игры
  - GMLayout с TopBar, LeftPanel, BottomBar и main area
  - TopBar - показывает код сессии, количество игроков, статус подключения
  - LeftPanel - табы: Игроки, События, Бой, Статистика (вкладки с заглушками)
  - BottomBar - DiceSelector + последние 3 броска
  - PlayersTab в левой панели для просмотра игроков
  - Интеграция с системой бросков кубиков
  - RollResult модальное окно показывается при броске
  - Адаптивный layout для мобильных устройств

2026-02-01: Реализована система бросков кубиков
  - DiceButton - кнопка выбора кубика с визуальной индикацией
  - DiceSelector - панель выбора и броска кубиков (d4, d6, d8, d10, d12, d20, d100)
  - RollResult - модальное окно с анимацией результата броска
  - RollHistory - история последних бросков с временными метками
  - Поддержка модификаторов (+/-) и пользовательских формул
  - Детекция критических успехов (20 на d20) и провалов (1 на d20)
  - WebSocket синхронизация результатов между всеми участниками
  - Обновлен dice store с методами roll(), hideResult(), clearHistory()
  - Временно добавлено в GM лобби для тестирования

2026-02-01: Исправлен скроллинг в лобби
  - Добавлен max-height и overflow-y: auto для PlayersLobbyList
  - Добавлен max-height и overflow-y: auto для NPCSection
  - Добавлен max-height и overflow-y: auto для CharacterSelection
  - Стилизован scrollbar для единого дизайна (тонкий, полупрозрачный)

2026-02-01: Исправлена проблема синхронизации WebSocket на VPS
  - Исправлена проблема синхронизации WebSocket на VPS (динамическое определение URL).
  - Предотвращено дублирование обработчиков событий WebSocket в Pinia сторах.
  - Улучшено управление жизненным циклом WebSocket подключений.

2026-01-27: Добавлены шаблоны классов D&D 5e
  - 12 классов: Fighter, Wizard, Rogue, Cleric, Barbarian, Paladin, Bard, Druid, Monk, Sorcerer, Warlock
  - Каждый шаблон включает: характеристики, HP, стартовые предметы и заклинания
  - API endpoints: GET /api/templates, GET /api/templates/{id},
    POST /api/templates/create
  - Русские и английские названия/описания

2026-01-27: Добавлена система сохранения сессий (persistence)
  - Новый модуль app/services/persistence/ с Registry паттерном
  - Сериализаторы для Player, Character, Item, Spell, Combat
  - API endpoints: /api/session/export, /api/session/export/download,
    /api/session/import, /api/session/validate
  - Поддержка версионирования формата и миграций
  - Документация в docs/persistence.md

2026-01-27: Создан базовый фронтенд для GM интерфейса
  - Vue 3 + TypeScript + Vite проект
  - Design tokens и базовая дизайн-система
  - Pinia stores: session, characters, dice
  - API клиент с Axios и WebSocket сервис
  - Базовые компоненты: BaseButton, BasePanel, BaseInput, BaseModal
  - Компоненты персонажей: CharacterCard, HPBar
  - GM Layout с TopBar, LeftPanel, BottomBar
  - HomeView для создания/входа в сессию
  - GMView с интеграцией всех компонентов
  - Vue Router с navigation guards
  - Интеграция с REST API и WebSocket для реального времени

2026-01-27: Интеграция Templates API и UI создания персонажей
  - Добавлены TypeScript типы для шаблонов классов
  - Templates API интеграция (list, get, createCharacter)
  - Метод createFromTemplate() в characters store
  - Компоненты: ClassTemplateCard, TemplateSelector
  - CreateCharacterModal с двухшаговым процессом создания
  - Кнопка создания персонажа в PlayersTab
  - Toast уведомления для успеха/ошибки операций
  - Визуальное выделение классов цветами из design tokens

2026-01-27: Реализовано лобби сессии для GM
  - Backend: добавлено поле session_started в модель Session
  - Миграция БД: добавлена колонка session_started в таблицу sessions
  - API endpoint POST /api/session/start для старта сессии
  - GMLobbyView - страница лобби с настройками перед игрой
  - SessionCodeDisplay - отображение кода сессии с копированием
  - PlayersLobbyList - список игроков с их персонажами (разворачиваемый)
  - NPCSection - управление NPC с созданием и удалением
  - SessionSettings - экспорт/импорт сессии и статистика
  - StartGameButton - кнопка начала игры с переходом на основной интерфейс
  - Роутинг: /gm/lobby для лобби, автоматические редиректы по состоянию сессии
  - Кнопка создания персонажа перенесена из PlayersTab в NPCSection
  - Toast компонент для уведомлений пользователя

2026-01-27: Реализован интерфейс игрока MVP
  - PlayerLayout - layout компонент для интерфейса игрока с CSS Grid структурой
  - PlayerTopBar - компактный заголовок с кодом сессии, статусом подключения и именем игрока
  - CharacterSheet - компонент для отображения персонажей игрока с возможностью выбора
  - PlayerDiceSelector - упрощенный селектор кубиков для игрока с отображением последнего результата
  - PlayerView - полная реализация интерфейса игрока с интеграцией всех компонентов
  - WebSocket интеграция для обновлений в реальном времени (персонажи, кубики, статус сессии)
  - Адаптивный дизайн для мобильных и десктоп устройств
  - Заглушка карты для будущей реализации интерактивной карты

2026-01-27: Добавлен выбор персонажа и статус готовности в лобби
  - Backend: добавлено поле is_ready в модель Player и миграция БД
  - API endpoint POST /api/session/ready для установки статуса готовности игрока
  - PlayerLobbyView - страница лобби игрока с выбором/созданием персонажа и кнопкой готовности
  - CharacterSelection - компонент для выбора существующего или создания нового персонажа
  - ReadyButton - кнопка переключения статуса готовности (готов/не готов)
  - PlayersLobbyList - добавлен индикатор готовности игроков для GM с подсчетом готовых
  - WebSocket событие player_ready для обновления статуса в реальном времени
  - Роутинг: игроки попадают в /play/lobby до начала игры, затем редирект на /play
  - Обновлен HomeView: после присоединения редирект на лобби игрока
